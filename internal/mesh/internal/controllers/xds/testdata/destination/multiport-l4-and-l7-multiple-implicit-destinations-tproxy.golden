{
  "clusters": {
    "grpc.api-app.default.dc1.internal.foo.consul": {
      "altStatName": "grpc.api-app.default.dc1.internal.foo.consul",
      "endpointGroup": {
        "dynamic": {
          "config": {
            "connectTimeout": "5s",
            "disablePanicThreshold": true
          },
          "outboundTls": {
            "alpnProtocols": [
              "consul~grpc"
            ],
            "outboundMesh": {
              "identityKey": "test-identity",
              "sni": "api-app.default.dc1.internal.foo.consul",
              "validationContext": {
                "spiffeIds": [
                  "spiffe://foo.consul/ap/default/ns/default/identity/api-app-identity"
                ],
                "trustBundlePeerNameKey": "local"
              }
            }
          }
        }
      },
      "name": "grpc.api-app.default.dc1.internal.foo.consul",
      "protocol": "PROTOCOL_GRPC"
    },
    "grpc.api-app2.default.dc1.internal.foo.consul": {
      "altStatName": "grpc.api-app2.default.dc1.internal.foo.consul",
      "endpointGroup": {
        "dynamic": {
          "config": {
            "connectTimeout": "5s",
            "disablePanicThreshold": true
          },
          "outboundTls": {
            "alpnProtocols": [
              "consul~grpc"
            ],
            "outboundMesh": {
              "identityKey": "test-identity",
              "sni": "api-app2.default.dc1.internal.foo.consul",
              "validationContext": {
                "spiffeIds": [
                  "spiffe://foo.consul/ap/default/ns/default/identity/api-app2-identity"
                ],
                "trustBundlePeerNameKey": "local"
              }
            }
          }
        }
      },
      "name": "grpc.api-app2.default.dc1.internal.foo.consul",
      "protocol": "PROTOCOL_GRPC"
    },
    "http.api-app.default.dc1.internal.foo.consul": {
      "altStatName": "http.api-app.default.dc1.internal.foo.consul",
      "endpointGroup": {
        "dynamic": {
          "config": {
            "connectTimeout": "5s",
            "disablePanicThreshold": true
          },
          "outboundTls": {
            "alpnProtocols": [
              "consul~http"
            ],
            "outboundMesh": {
              "identityKey": "test-identity",
              "sni": "api-app.default.dc1.internal.foo.consul",
              "validationContext": {
                "spiffeIds": [
                  "spiffe://foo.consul/ap/default/ns/default/identity/api-app-identity"
                ],
                "trustBundlePeerNameKey": "local"
              }
            }
          }
        }
      },
      "name": "http.api-app.default.dc1.internal.foo.consul",
      "protocol": "PROTOCOL_HTTP"
    },
    "http.api-app2.default.dc1.internal.foo.consul": {
      "altStatName": "http.api-app2.default.dc1.internal.foo.consul",
      "endpointGroup": {
        "dynamic": {
          "config": {
            "connectTimeout": "5s",
            "disablePanicThreshold": true
          },
          "outboundTls": {
            "alpnProtocols": [
              "consul~http"
            ],
            "outboundMesh": {
              "identityKey": "test-identity",
              "sni": "api-app2.default.dc1.internal.foo.consul",
              "validationContext": {
                "spiffeIds": [
                  "spiffe://foo.consul/ap/default/ns/default/identity/api-app2-identity"
                ],
                "trustBundlePeerNameKey": "local"
              }
            }
          }
        }
      },
      "name": "http.api-app2.default.dc1.internal.foo.consul",
      "protocol": "PROTOCOL_HTTP"
    },
    "original-destination": {
      "endpointGroup": {
        "passthrough": {
          "config": {
            "connectTimeout": "5s"
          }
        }
      },
      "name": "original-destination",
      "protocol": "PROTOCOL_TCP"
    },
    "tcp.api-app.default.dc1.internal.foo.consul": {
      "altStatName": "tcp.api-app.default.dc1.internal.foo.consul",
      "endpointGroup": {
        "dynamic": {
          "config": {
            "connectTimeout": "5s",
            "disablePanicThreshold": true
          },
          "outboundTls": {
            "alpnProtocols": [
              "consul~tcp"
            ],
            "outboundMesh": {
              "identityKey": "test-identity",
              "sni": "api-app.default.dc1.internal.foo.consul",
              "validationContext": {
                "spiffeIds": [
                  "spiffe://foo.consul/ap/default/ns/default/identity/api-app-identity"
                ],
                "trustBundlePeerNameKey": "local"
              }
            }
          }
        }
      },
      "name": "tcp.api-app.default.dc1.internal.foo.consul",
      "protocol": "PROTOCOL_TCP"
    },
    "tcp.api-app2.default.dc1.internal.foo.consul": {
      "altStatName": "tcp.api-app2.default.dc1.internal.foo.consul",
      "endpointGroup": {
        "dynamic": {
          "config": {
            "connectTimeout": "5s",
            "disablePanicThreshold": true
          },
          "outboundTls": {
            "alpnProtocols": [
              "consul~tcp"
            ],
            "outboundMesh": {
              "identityKey": "test-identity",
              "sni": "api-app2.default.dc1.internal.foo.consul",
              "validationContext": {
                "spiffeIds": [
                  "spiffe://foo.consul/ap/default/ns/default/identity/api-app2-identity"
                ],
                "trustBundlePeerNameKey": "local"
              }
            }
          }
        }
      },
      "name": "tcp.api-app2.default.dc1.internal.foo.consul",
      "protocol": "PROTOCOL_TCP"
    }
  },
  "endpoints": {
    "grpc.api-app.default.dc1.internal.foo.consul": {
      "endpoints": [
        {
          "healthStatus": "HEALTH_STATUS_HEALTHY",
          "hostPort": {
            "host": "10.1.1.1",
            "port": 20000
          }
        }
      ]
    },
    "grpc.api-app2.default.dc1.internal.foo.consul": {
      "endpoints": [
        {
          "healthStatus": "HEALTH_STATUS_HEALTHY",
          "hostPort": {
            "host": "10.1.1.1",
            "port": 20000
          }
        }
      ]
    },
    "http.api-app.default.dc1.internal.foo.consul": {
      "endpoints": [
        {
          "healthStatus": "HEALTH_STATUS_HEALTHY",
          "hostPort": {
            "host": "10.1.1.1",
            "port": 20000
          }
        }
      ]
    },
    "http.api-app2.default.dc1.internal.foo.consul": {
      "endpoints": [
        {
          "healthStatus": "HEALTH_STATUS_HEALTHY",
          "hostPort": {
            "host": "10.1.1.1",
            "port": 20000
          }
        }
      ]
    },
    "tcp.api-app.default.dc1.internal.foo.consul": {
      "endpoints": [
        {
          "healthStatus": "HEALTH_STATUS_HEALTHY",
          "hostPort": {
            "host": "10.1.1.1",
            "port": 20000
          }
        }
      ]
    },
    "tcp.api-app2.default.dc1.internal.foo.consul": {
      "endpoints": [
        {
          "healthStatus": "HEALTH_STATUS_HEALTHY",
          "hostPort": {
            "host": "10.1.1.1",
            "port": 20000
          }
        }
      ]
    }
  },
  "identity": {
    "name": "test-identity",
    "tenancy": {
      "namespace": "default",
      "partition": "default",
      "peerName": "local"
    },
    "type": {
      "group": "auth",
      "groupVersion": "v2beta1",
      "kind": "WorkloadIdentity"
    }
  },
  "leafCertificates": {
    "test-identity": {
      "cert": "-----BEGIN CERTIFICATE-----\nMIICDjCCAbWgAwIBAgIBAjAKBggqhkjOPQQDAjAUMRIwEAYDVQQDEwlUZXN0IENB\nIDEwHhcNMjMxMDE2MTYxMzI5WhcNMjMxMDE2MTYyMzI5WjAAMFkwEwYHKoZIzj0C\nAQYIKoZIzj0DAQcDQgAErErAIosDPheZQGbxFQ4hYC/e9Fi4MG9z/zjfCnCq/oK9\nta/bGT+5orZqTmdN/ICsKQDhykxZ2u/Xr6845zhcJaOCAQowggEGMA4GA1UdDwEB\n/wQEAwIDuDAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDAYDVR0TAQH/\nBAIwADApBgNVHQ4EIgQg3ogXVz9cqaK2B6xdiJYMa5NtT0KkYv7BA2dR7h9EcwUw\nKwYDVR0jBCQwIoAgq+C1mPlPoGa4lt7sSft1goN5qPGyBIB/3mUHJZKSFY8wbwYD\nVR0RAQH/BGUwY4Zhc3BpZmZlOi8vMTExMTExMTEtMjIyMi0zMzMzLTQ0NDQtNTU1\nNTU1NTU1NTU1LmNvbnN1bC9hcC9kZWZhdWx0L25zL2RlZmF1bHQvaWRlbnRpdHkv\ndGVzdC1pZGVudGl0eTAKBggqhkjOPQQDAgNHADBEAiB6L+t5bzRrBPhiQYNeA7fF\nUCuLWrdjW4Xbv3SLg0IKMgIgfRC5hEx+DqzQxTCP4sexX3hVWMjKoWmHdwiUcg+K\n/IE=\n-----END CERTIFICATE-----\n",
      "key": "-----BEGIN EC PRIVATE KEY-----\nMHcCAQEEIFIFkTIL1iUV4O/RpveVHzHs7ZzhSkvYIzbdXDttz9EooAoGCCqGSM49\nAwEHoUQDQgAErErAIosDPheZQGbxFQ4hYC/e9Fi4MG9z/zjfCnCq/oK9ta/bGT+5\norZqTmdN/ICsKQDhykxZ2u/Xr6845zhcJQ==\n-----END EC PRIVATE KEY-----\n"
    }
  },
  "listeners": [
    {
      "capabilities": [
        "CAPABILITY_TRANSPARENT"
      ],
      "defaultRouter": {
        "l4": {
          "cluster": {
            "name": "original-destination"
          },
          "statPrefix": "upstream.original-destination"
        }
      },
      "direction": "DIRECTION_OUTBOUND",
      "hostPort": {
        "host": "127.0.0.1",
        "port": 15001
      },
      "name": "outbound_listener",
      "routers": [
        {
          "l4": {
            "cluster": {
              "name": "tcp.api-app.default.dc1.internal.foo.consul"
            },
            "statPrefix": "upstream.tcp.api-app.default.default.dc1"
          },
          "match": {
            "destinationPort": 7070,
            "prefixRanges": [
              {
                "addressPrefix": "1.1.1.1",
                "prefixLen": 32
              }
            ]
          }
        },
        {
          "l4": {
            "cluster": {
              "name": "tcp.api-app2.default.dc1.internal.foo.consul"
            },
            "statPrefix": "upstream.tcp.api-app2.default.default.dc1"
          },
          "match": {
            "destinationPort": 7070,
            "prefixRanges": [
              {
                "addressPrefix": "2.2.2.2",
                "prefixLen": 32
              },
              {
                "addressPrefix": "3.3.3.3",
                "prefixLen": 32
              }
            ]
          }
        },
        {
          "l7": {
            "route": {
              "name": "default/local/default/api-app:http"
            },
            "statPrefix": "upstream."
          },
          "match": {
            "destinationPort": 8080,
            "prefixRanges": [
              {
                "addressPrefix": "1.1.1.1",
                "prefixLen": 32
              }
            ]
          }
        },
        {
          "l7": {
            "route": {
              "name": "default/local/default/api-app2:http"
            },
            "statPrefix": "upstream."
          },
          "match": {
            "destinationPort": 8080,
            "prefixRanges": [
              {
                "addressPrefix": "2.2.2.2",
                "prefixLen": 32
              },
              {
                "addressPrefix": "3.3.3.3",
                "prefixLen": 32
              }
            ]
          }
        },
        {
          "l7": {
            "protocol": "L7_PROTOCOL_GRPC",
            "route": {
              "name": "default/local/default/api-app:grpc"
            },
            "statPrefix": "upstream."
          },
          "match": {
            "destinationPort": 8081,
            "prefixRanges": [
              {
                "addressPrefix": "1.1.1.1",
                "prefixLen": 32
              }
            ]
          }
        },
        {
          "l7": {
            "protocol": "L7_PROTOCOL_GRPC",
            "route": {
              "name": "default/local/default/api-app2:grpc"
            },
            "statPrefix": "upstream."
          },
          "match": {
            "destinationPort": 8081,
            "prefixRanges": [
              {
                "addressPrefix": "2.2.2.2",
                "prefixLen": 32
              },
              {
                "addressPrefix": "3.3.3.3",
                "prefixLen": 32
              }
            ]
          }
        }
      ]
    }
  ],
  "routes": {
    "default/local/default/api-app2:grpc": {
      "virtualHosts": [
        {
          "domains": [
            "*"
          ],
          "name": "default/local/default/api-app2:grpc",
          "routeRules": [
            {
              "destination": {
                "cluster": {
                  "name": "grpc.api-app2.default.dc1.internal.foo.consul"
                }
              },
              "match": {
                "pathMatch": {
                  "prefix": "/"
                }
              }
            }
          ]
        }
      ]
    },
    "default/local/default/api-app2:http": {
      "virtualHosts": [
        {
          "domains": [
            "*"
          ],
          "name": "default/local/default/api-app2:http",
          "routeRules": [
            {
              "destination": {
                "cluster": {
                  "name": "http.api-app2.default.dc1.internal.foo.consul"
                }
              },
              "match": {
                "pathMatch": {
                  "prefix": "/"
                }
              }
            }
          ]
        }
      ]
    },
    "default/local/default/api-app:grpc": {
      "virtualHosts": [
        {
          "domains": [
            "*"
          ],
          "name": "default/local/default/api-app:grpc",
          "routeRules": [
            {
              "destination": {
                "cluster": {
                  "name": "grpc.api-app.default.dc1.internal.foo.consul"
                }
              },
              "match": {
                "pathMatch": {
                  "prefix": "/"
                }
              }
            }
          ]
        }
      ]
    },
    "default/local/default/api-app:http": {
      "virtualHosts": [
        {
          "domains": [
            "*"
          ],
          "name": "default/local/default/api-app:http",
          "routeRules": [
            {
              "destination": {
                "cluster": {
                  "name": "http.api-app.default.dc1.internal.foo.consul"
                }
              },
              "match": {
                "pathMatch": {
                  "prefix": "/"
                }
              }
            }
          ]
        }
      ]
    }
  },
  "trustBundles": {
    "local": {
      "roots": [
        "some-root",
        "some-other-root"
      ],
      "trustDomain": "some-trust-domain"
    }
  }
}
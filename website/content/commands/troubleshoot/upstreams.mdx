---
layout: commands
page_title: 'Commands: Troubleshoot Upstreams'
description: |
The `consul troubleshoot upstream` lists the available upstreams in the Consul service mesh from the current service.
---

# Consul Troubleshoot Upstreams

Command: `consul troubleshoot upstreams`

## Usage

Usage: `consul troubleshoot upstreams [options]

#### Command Options

- `-envoy-admin-endpoint=<value>` - Envoy Admin endpoint address for the local Envoy instance.
  Defaults to `127.0.0.1:19000`.

## Examples

Display all transparent proxy upstreams in Consul service mesh from the current Envoy instance.

```shell-session hideClipboard
$ consul troubleshoot upstreams

==> Upstreams (explicit upstreams only) (0)

==> Upstreams IPs (transparent proxy only) (1)
[10.4.6.160 240.0.0.3] true map[backend.default.dc1.internal.e08fa6d6-e91e-dfe0-f6e1-ba097a828e31.consul backend2.default.dc1.internal.e08fa6d6-e91e-dfe0-f6e1-ba097a828e31.consul]

If you don't see your upstream address or cluster for a transparent proxy upstream:
- Check intentions: Tproxy upstreams are configured based on intentions, make sure you have configured intentions to allow traffic to your upstream.
- You can also check that the right cluster is being dialed by running a DNS lookup for the upstream you are dialing (i.e dig backend.svc.consul). If the address you get from that is missing from the Upstream IPs your proxy may be misconfigured.
```

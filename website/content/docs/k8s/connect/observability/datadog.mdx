---
layout: docs
page_title: Configure Datadog Metrics Collection for Consul on Kubernetes
description: >-
  Enable Consul Monitoring via Datadog using the `metrics.datadog` helm annotation.
---

# Datadog Integration for Consul on Kubernetes

The Helm chart includes automated configuration options in order to integrate with Datadog.

### Note

<Note>
  The **DogStatsD**, **Openmetrics Prometheus**, and **Datadog Integration** methods are mutually exclusive and cannot be enabled at the same time. This is currently unsupported within current Datadog Integration. One of the three methods of integration must be enabled at any given time.
</Note>

## Consul Datadog Agent Metrics Integration Checks:

  <CodeBlockConfig heading={"Datadog Consul Checks"}>

  ```yaml
  metrics:
    enabled: true
    enableAgentMetrics: true
    datadog:
      enabled: true
      namespace: "datadog"
  ```

  </CodeBlockConfig>

  | Consul Component | Description                                      | API Endpoint(s)                        |
  |------------------|--------------------------------------------------|----------------------------------------|
  | Serf             | Events and Membership Flaps                      | `/v1/agent/metrics` (prometheus)       |
  | Raft             | Monitors Raft peer information                   | `/v1/status/leader` `/v1/status/peers` |
  | Catalog Services | Service Health Status and Node Count             |                                        |
  | Catalog Nodes    | Node Service Count and Health Status             |                                        |
  | Consul Latency   | Consul LAN + WAN Coordinate Latency Calculations |                                        |


## Consul Server Agent DogstatsD Metrics Collection

<Tabs>
  <CodeBlockConfig heading={"DogstatsD (UDS)"}>

  ```yaml
  metrics:
    enabled: true
    enableAgentMetrics: true
    datadog:
      enabled: true
      namespace: "datadog"
      dogstatsd:
        enabled: true
        socketTransportType: "UDS"
        dogstatsdAddr: "/var/run/datadog/dsd.socket"
  ```

  </CodeBlockConfig>

  <CodeBlockConfig heading={"DogstatsD (UDP)"}>

  ```yaml
  metrics:
    enabled: true
    enableAgentMetrics: true
      datadog:
        enabled: true
        namespace: "datadog"
        dogstatsd:
          enabled: true
          socketTransportType: "UDP"
          dogstatsdAddr: "datadog.datadog.svc.cluster.local"
  ```

  </CodeBlockConfig>
</Tabs>

  - Collects DogstatsD formatted metrics pertaining to Consul Serf Membership, Raft, DNS Performance, Agent Telemetry, and much more.
  - Enables configuring DogstatsD metric collection using one of either `UDP` or `Unix Domain Socket configuration`

## Consul Server Openmetrics Prometheus Metrics Collection

  <CodeBlockConfig heading={"OpenMetrics Prometheus"}>

  ```yaml
  metrics:
    enabled: true
    enableAgentMetrics: true
    datadog:
      enabled: true
      namespace: "datadog"
      openMetricsPrometheus:
        enabled: true
  ```

  </CodeBlockConfig>

  - Collects Consul related metrics via the `/v1/agent/metrics` API endpoint leveraging the `prometheus` query parameter.

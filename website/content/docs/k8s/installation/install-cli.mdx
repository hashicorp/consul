---
layout: docs
page_title: Installing the Consul K8s CLI
description: >-
  Consul K8s CLI is a tool for quickly installing and interacting with Consul on Kubernetes.
---

# Installing the Consul K8s CLI

## Test

1. Copy the server key to the workload cluster.

   ```shell-session
   $ kubectl get secret server-consul-ca-key --context <server-context> --output yaml | kubectl apply --context <client-context> --filename -
   ```

1. If ACLs were enabled in the server configuration values file, copy the token to the workload cluster.

   ```shell-session
   $ kubectl get secret server-consul-partitions-acl-token --context <server-context> --output yaml | kubectl apply --context <client-context> --filename -
   ```

1. Create the workload configuration for client nodes in your cluster. Create a configuration for each admin partition.
   In the following example, the external IP address and the Kubernetes authentication method IP address from the previous steps have been applied. Also, ensure a unique global name is assigned.

   <CodeTabs heading="client.yaml">

   <CodeBlockConfig lineNumbers highlight="2,27,29,33">

   ```yaml
   global:
     name: client
     enabled: false
     enableConsulNamespaces: true
     image: hashicorp/consul-enterprise:1.11.2-ent
     adminPartitions:
       enabled: true
       name: clients
     tls:
       enabled: true
       caCert:
         secretName: server-consul-ca-cert
         secretKey: tls.crt
       caKey:
         secretName: server-consul-ca-key
         secretKey: tls.key
     acls:
       manageSystemACLs: true
       bootstrapToken:
         secretName: server-consul-partitions-acl-token
         secretKey: token
     enterpriseLicense:
       secretName: license
       secretKey: key
   externalServers:
     enabled: true
     hosts: [34.135.103.67] # See step 5
     tlsServerName: server.dc1.consul
     k8sAuthMethodHost: https://104.154.156.146 # See step 6
   client:
     enabled: true
     exposeGossipPorts: true
     join: [34.135.103.67] # See step 5
   connectInject:
     enabled: true
     consulNamespaces:
       mirroringK8S: true
   controller:
     enabled: true
   meshGateway:
     enabled: true
     replicas: 1
   dns:
     enabled: true
     enableRedirection: true
   ```

   </CodeBlockConfig>
</CodeTabs>

1. Install the workload client clusters:

   ```shell-session
   $ helm install clients hashicorp/consul --values client.yaml --version "0.40.0"
   ```

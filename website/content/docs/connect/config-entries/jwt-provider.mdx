---
page_title: JWT authorization configuration entry reference
description: |-
  
---

# JWT authorization configuration entry reference
[Description]

## Configuration model

The following list outlines field hierarchy, language-specific data types, and requirements in a JWT provider configuration entry. Click on a property name to view additional details, including default values.


[`Kind`](#kind): string | required | must be set to `jwt-provider`
[`Name`](#name): string | required
[`Issuer`](#issuer): string 
[`JWKS`](#jwks): map
[`Local`](#jwks-local): map
[`String`](#jwks-local-string): string
[`Filename`](#jwks-local-filename): string
[`Remote`](#jwks-remote): map
[`URI`](#jwks-remote-uri): string
[`RequestTimeoutMs`](#jwks-remote-requesttimeoutms): integer |
[`CacheDuration`](#jwks-remote-cacheduration): string | `5m` 
[`FetchAsynchronously`](#jwks-remote-fetchasynchronously): boolean | `false`
[`RetryPolicy`](#jwks-remote-retrypolicy): map
[`NumRetries`](#jwks-remote-retrypolicy): integer | `0`
[`Audiences`](#audiences): list of strings
[`Locations`](#locations): list of maps
[`Header`](#locations-header): map
[`Name`](#locations-header-name): string
[`ValuePrefix`](#locations-header-valueprefix): string
[`Forward`](#locations-header-forward): boolean | `false`
[`QueryParam`](#locations-queryparam): map
[`Name`](#locations-queryparam): string
[`Cookie`](#locations-cookie): map
[`Name`](#locations-cookie): string
[`Forwarding`](#forwarding): map
[`HeaderName`](#forwarding-headername): string
[`PadForwardPayloadHeader`](#forwarding-padforwardpayloadheader): boolean | `false`
[`ClockSkewSeconds`](#clockskewseconds): integer | `30`
[`CacheConfig`](#cacheconfig): map
[`Size`](#cacheconfig-size): integer | `0`


## Complete configuration

When every field is defined, a JWT provider configuration entry has the following form:

Kind = "jwt-provider"
Name = "<name-of-provider-configuration-entry>"
Issuer = "<jwt-issuer>"
JWKS = {
        Remote = {
        URI = "<uniform-resource-identifier>"
        CacheDuration = "30m"
    }
}

Forwarding = {
        HeaderName = "user-token"
}


## Specification

This section provides details about the fields you can configure in the JWT provider configuration entry.

### `Kind`

Specifies the type of configuration entry to implement.
#### `Values`

Default: None
This field is required.
Data type: String value that must be set to `jwt-provider`.
### `Name`

Specifies a name for the configuration entry. We recommend naming the configuration file after the JWT provider used in the configuration. Refer to the [Okta JWT Provider example](#okta-jwt-provider) for an example configuration.
#### `Values`

Default: None
This field is required.
Data type: String
### `Issuer`

Specifies the provider that issued the JWT. This value must match the token’s `iss` (issuer) claim.

#### `Values`

Default: None
Data type: String
### `Audiences`

Specifies a set of audiences that the JWT is allowed to access, formatted as a list of `aud` (audience) claims. When this field is specified, all JWTs verified with the provider must address at least one of the audiences in order to be considered valid.
#### `Values`

Default: None
Data type: List of strings
### `JWKS`

Defines a JSON Web Key Set. This field can be configured for a local file, or it can specify instructions to fetch a key set from a remote server. You cannot specify [`JWKS{}.Local`](#jwks-local) and [`JWKS{}.Remote`](#jwks-remote) in the same map.

#### `Values`

Default: None
Data type: Map that can contain one of the following parameters:
[`Local`](#jwks-local)
[`Remote`](#jwks-remote)

### `JWKS{}.Local`
Specifies a local source for the JSON Web Key Set. You can specify the source as a string in the configuration entry or you can include a local filename that contains the set. You cannot specify both `String` and `Filename` in the same map.
#### `Values`

Default: None
Data type: Map that can contain one of the following parameters:
[`String`](#jwks-local-string)
[`Filename`](#jwks-local-filename)
### `JWKS{}.Local{}.String`
Specifies the JSON Web Key Set that validates the JWT’s signature, formatted as a base64 encoded string. You cannot specify the `String` parameter if [`JWKS{}.Local{}.Filename`](#jwks-local-filename) is also specified in the same map.
#### `Values`

Default: None
Data type: String
### `JWKS{}.Local{}.Filename`
Specifies the path to the JSON Web Key Set’s location on the local disk. When this field is specified, the file must be present on the disk for all proxies with service intentions referencing this provider. You cannot specify the `Filename` parameter if [`JWKS{}.Local{}.String`](#jwks-local-string) is also specified in the same map.

#### `Values`

Default: None
Data type: String
### `JWKS{}.Remote`
Specifies a remote source for the JSON Web Key Set and configures behavior when fetching the key set. 
#### `Values`

Default: None
Data type: Map that can contain the following parameters:
[`URI`](#jwks-remote-uri)
[`RequestTimeoutMs`](#jwks-remote-requesttimeoutms) 
[`CacheDuration`](#jwks-remote-cacheduration) 
[`FetchAsynchronously`](#jwks-remote-fetchasynchronously)
[`RetryPolicy`](#jwks-remote-retrypolicy)
### `JWKS.Remote{}.URI`
Specifies the URI of the server to query for the JSON Key Web Set.
#### `Values`

Default: None
Data type: String
### `JWKS.Remote{}.RequestTimeoutMs`
Specifies the length of time before a request to the remote URI times out, measured in milliseconds (ms).
#### `Values`

Default: None
Data type: Integer
### `JWKS.Remote{}.CacheDuration`
Specifies the amount of time cached keys are available before they expire.

The default cache duration is 5 minutes.
#### `Values`

Default: `5m`
Data type: String
### `JWKS.Remote{}.FetchAsynchronously`
Determines if the JSON Web Key Set is fetched before a client request arrives. When enabled, the JWKS is fetched before incoming requests. When not enabled, the JWKS is fetched after each request arrives and the proxy listener waits for the JWKS to be fetched before activating.

This parameter is set to `false` by default.

#### `Values`

Default: `false`
Data type: Boolean
### `JWKS.Remote{}.RetryPolicy`
Defines a retry policy when fetching the JSON Web Key Set from the remote location.

#### `Values`

Default: None
Data type: Map that contains the following parameter:

| Parameter | Description | Data type | Default value| 
| -------------- | --------------- | ------------- | ---------------- |
| `NumRetries`| Specifies the number of times to attempt to fetch the JSON Web Key Set when the previous attempt fails. | Integer | `0` |
### `Locations`
Specifies the locations in requests where the JWT can be found. Envoy checks all of these locations to extract a JWT. 

This field can specify token locations in a header, a query parameter, or a cookie. When no locations are specified, Envoy defaults to the following locations:

    1. Authorization header with Bearer schema: `"Authorization: Bearer <token>"`
    1. `access_token` query parameter.
#### `Values`

Default: None
Data type: List that can contain maps of the following parameters:
[`Header`](#locations-header)
[`QueryParam`](#locations-queryparam)
[`Cookie`](#locations-cookie)

### `Locations[].Header`
Defines how to extract a JWT from an HTTP request header.
#### `Values`

Default: None
Data type: Map that can contain the following parameters:
[`Name`](#locations-header-name)
[`ValuePrefix`](#locations-header-valueprefix)
[`Forward`](#locations-header-forward)
### `Locations[].Header{}.Name`
Specifies the name of the HTTP request header containing the token.
#### `Values`

Default: None
Data type: String
### `Locations[].Header{}.ValuePrefix`
Specifies a prefix that must precede the token in the header value.
 
For example, `Bearer` is a standard value prefix for a header named "Authorization" that is formatted as `Authorization: Bearer <token>`. The prefix is not part of the token itself.

#### `Values`

Default: None
Data type: String

### `Locations[].Header{}.Forward`
Specifies whether the header with the JWT is forwarded after the token is verified. When set to  false, the header is not forwarded.

Default value is false.
#### `Values`

Default: `false`
Data type: Boolean

### `Locations[].QueryParam`
Defines how to extract a JWT from an HTTP request query parameter.


#### `Values`

Default: None
Data type: Map that contains the following parameter:

| Parameter | Description | Data type | Default value| 
| -------------- | --------------- | ------------- | ---------------- |
| `Name`| Specifies the name of the query parameter containing the token. | String | None |

### `Locations[].Cookie`
Defines how to extract a JWT from an HTTP request cookie.
#### `Values`

Default: None
Data type: Map that contains the following parameter:

| Parameter | Description | Data type | Default value| 
| -------------- | --------------- | ------------- | ---------------- |
| `Name`| Specifies the name of the cookie containing the token. | String | None 

### `Forwarding`

Defines rules for forwarding JWTs to the backend after they are verified.
#### `Values`

Default: None
Data type: Map that can contain the following parameters:
[`HeaderName`](#forwarding-headername)
[`PadForwardPayloadHeader`](#forwarding-padforwardpayloadheader)

### `Forwarding{}.HeaderName`
Specifies a header name to use when forwarding a verified JWT to the backend. This field does not assume where the JWT was extracted from, and it can be applied to tokens extracted from headers, query parameters, or cookies.

The header value is base64 URL encoded. It is not padded by default.
#### `Values`

Default: None
Data type: String

### `Forwarding{}.PadForwardPayloadHeader`
Determines whether to add padding to the base64 encoded token specified in [Forwarding{}.HeaderName`](#forwarding-header-name). 

By default, this field is set to `false`.
#### `Values`

Default: `false`
Data type: Boolean

### `ClockSkewSeconds`

Specifies the maximum allowable time difference from clock skew when validating the JSON web token’s `exp` (expiration) and `nbf`  (not before) claims, measured in seconds. 

By default, this parameter is configured to 30 seconds.

#### `Values`

Default: `30`
Data type: Integer

### `CacheConfig`
Defines behavior for caching the validation result of previously encountered JWTs. Caching results can speed up verification when the same tokens are expected to be handled multiple times. By default, the cache can hold 100 JWTs.

#### `Values`

Default: None
Data type: Map that contains the following parameter:

| Parameter | Description | Data type | Default value| 
| -------------- | --------------- | ------------- | ---------------- |
| `Size`| Specifies the number of JSON web tokens to cache. | Integer | `100` |
## Examples

The following examples demonstrate common JWT provider configuration patterns for specific use cases.

### Okta JWT provider

The following example configures Consul to fetch a JSON Web Token issued by Okta. Consul fetches the token from the URI and keeps it in its cache for 30 minutes before the token expires. After validation, the token is forwarded to the backend with `user-token` appended to the HTTP header.

Kind = "jwt-provider"
Name = "okta"

Issuer = "okta"

JWKS = {
    Remote = {
        URI = "https://dev-850216.okta.com/oauth2/default/v1/keys"
        CacheDuration = "30m"
    }
}

Forwarding = {
    HeaderName = "user-token"
}
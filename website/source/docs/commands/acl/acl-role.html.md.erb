---
layout: "docs"
page_title: "Commands: ACL Role Management"
sidebar_current: "docs-commands-acl-role"
---

-> **1.5.0+:**  These commands are available in Consul versions 1.5.0 and later.

# Consul ACL Roles

Command: `consul acl role`

The `acl role` command is used to manage Consul's ACL roles. There are
subcommands for the individual operations that can be performed.

* [`create`](#create)
* [`read`](#read)
* [`update`](#update)
* [`delete`](#delete)
* [`list`](#list)

ACL roles are also accessible via the [HTTP API](/api/acl/roles.html).

Usage: `consul acl role <subcommand> [options] [args]`

-> **Note:** All of the examples show for the subcommands will require a valid
Consul token with the appropriate permissions.  Either set the
`CONSUL_HTTP_TOKEN` environment variable to the tokens secret ID or pass the
secret ID as the value of the `-token` parameter.

## Identifying Roles

In several of the subcommands a role will have to be identified to be read,
modified, or deleted. Those subcommands support specifying the role by its ID
using the `-id` parameter or by name using the `-name` parameter. When
specifying the role by its ID a unique role ID prefix may be specified instead
of the entire UUID. As long as it is unique it will be resolved to the full
UUID and used.

## Common Subcommand Options

All of the `consul acl role` subcommands support the following options:

<%= partial "docs/commands/http_api_options_client" %>
<%= partial "docs/commands/http_api_options_server" %>

## `create`

Command: `consul acl role create`

This command creates new roles.

### Usage

Usage: `consul acl role create [options] [args]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-description=<string>` - A description of the role.

* `-meta` - Indicates that role metadata such as the content hash and raft
   indices should be shown for each entry.

* `-name=<string>` - The new role's name. This flag is required.

* `-policy-id=<value>` - ID of a policy to use for this role. May be specified
  multiple times

* `-policy-name=<value>` - Name of a policy to use for this role. May be
  specified multiple times

* `-service-identity=<value>` - Name of a service identity to use for this
  role. May be specified multiple times. Format is the `SERVICENAME` or
  `SERVICENAME:DATACENTER1,DATACENTER2,...`

### Examples

Create a new role with one policy:

```sh
$ consul acl role create -name "crawler" -description "web crawler role" -policy-name "crawler-kv"
ID:           57147d87-6bf7-f794-1a6e-7d038c4e4ae9
Name:         crawler
Description:  web crawler role
Policies:
   2f8f99c7-edd9-2f09-7e4b-a1f519eb4fc2 - crawler-kv
```

Create a new role with one service identity:

```sh
$ consul acl role create -name archiver -description 'archiver role' -service-identity "archiver:dc2"
ID:           a365fdc9-ac71-e754-0645-7ab6bd747301
Name:         archiver
Description:  archiver role
Service Identities:
   archiver (Datacenters: dc2)
```

## `read`

Command: `consul acl role read`

This command reads and displays a roles details.

### Usage

Usage: `consul acl role read [options] [args]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-id=<string>` - The ID of the role to read. It may be specified as a unique ID
   prefix but will error if the prefix matches multiple role IDs.

* `-meta` - Indicates that role metadata such as the content hash and raft
  indices should be shown for each entry.

* `-name=<string>` - The name of the role to read.

### Examples

Get role details:

```sh
$ consul acl role read -id 57147d87-6bf7-f794-1a6e-7d038c4e4ae9
ID:           57147d87-6bf7-f794-1a6e-7d038c4e4ae9
Name:         crawler
Description:  web crawler role
Policies:
   2f8f99c7-edd9-2f09-7e4b-a1f519eb4fc2 - crawler-kv
```

Get role details by name:

```sh
$ consul acl role read -name archiver
ID:           a365fdc9-ac71-e754-0645-7ab6bd747301
Name:         archiver
Description:  archiver role
Service Identities:
   archiver (Datacenters: dc2)
```

## `update`

Command: `consul acl role update`

This command is used to update a role. The default operations is to merge the
current role with those values provided to the command invocation. Therefore to
update just one field, only the `-id` or `-name` options and the option to
modify must be provided. Note that renaming roles requires both the `-id` and
`-name` as the new name cannot yet be used to lookup the role.

### Usage

Usage: `consul acl role update [options] [args]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-description=<string>` - A description of the role.

* `-id=<string>` - The ID of the role to update. It may be specified as a
  unique ID prefix but will error if the prefix matches multiple role IDs

* `-meta` - Indicates that role metadata such as the content hash and raft
  indices should be shown for each entry

* `-name=<string>` - The role name.

* `-no-merge` - Do not merge the current role information with what is provided
  to the command. Instead overwrite all fields with the exception of the role
  ID which is immutable.

* `-policy-id=<value>` - ID of a policy to use for this role. May be specified
  multiple times

* `-policy-name=<value>` - Name of a policy to use for this role. May be
  specified multiple times

* `-service-identity=<value>` - Name of a service identity to use for this
  role. May be specified multiple times. Format is the `SERVICENAME` or
  `SERVICENAME:DATACENTER1,DATACENTER2,...`

### Examples

Update a role:

```sh
$ consul acl role update -id 57147d87-6bf7-f794-1a6e-7d038c4e4ae9 \
    -description 'better description' -service-identity 'crawler'
Role updated successfully
ID:           57147d87-6bf7-f794-1a6e-7d038c4e4ae9
Name:         crawler
Description:  better description
Policies:
   2f8f99c7-edd9-2f09-7e4b-a1f519eb4fc2 - crawler-kv
Service Identities:
   crawler (Datacenters: all)
```

Rename a role by prefix:

```sh
$ consul acl role update -id 57147 -name web-crawler
Role updated successfully
ID:           57147d87-6bf7-f794-1a6e-7d038c4e4ae9
Name:         web-crawler
Description:  better description
Policies:
   2f8f99c7-edd9-2f09-7e4b-a1f519eb4fc2 - crawler-kv
Service Identities:
   crawler (Datacenters: all)
```

## `delete`

Command: `consul acl role delete`

This command deletes a role. Roles may be deleted by their ID or by name.

### Usage

Usage: `consul acl role delete [options]`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-id=<string>` - The ID of the role to delete. It may be specified as a
  unique ID prefix but will error if the prefix matches multiple role IDs.

* `-name=<string>` - The Name of the role to delete.

### Examples

Delete a role by prefix:

```sh
$ consul acl role delete -id 57147
Role "57147d87-6bf7-f794-1a6e-7d038c4e4ae9" deleted successfully
```

Delete a role by name:

```sh
$ consul acl role delete -name crawler
Role "a365fdc9-ac71-e754-0645-7ab6bd747301" deleted successfully
```

## `list`

Command: `consul acl role list`

This command lists all roles. By default it will not show metadata.

### Usage

Usage: `consul acl role list`

#### Options

* [Common Subcommand Options](#common-subcommand-options)

* `-meta` - Indicates that role metadata such as the content hash and
   Raft indices should be shown for each entry.

### Examples

Default listing.

```sh
$ consul acl role list
web-crawler:
   ID:           57147d87-6bf7-f794-1a6e-7d038c4e4ae9
   Description:  better description
   Policies:
      2f8f99c7-edd9-2f09-7e4b-a1f519eb4fc2 - crawler-kv
   Service Identities:
      crawler (Datacenters: all)
archiver:
   ID:           a365fdc9-ac71-e754-0645-7ab6bd747301
   Description:  archiver role
   Service Identities:
      archiver (Datacenters: dc2)
```

Show Metadata.

```sh
$ consul acl role list -meta
web-crawler:
   ID:           57147d87-6bf7-f794-1a6e-7d038c4e4ae9
   Description:  better description
   Hash:         3bd7c15a77c8d1d45c515378f1176df2e6f76d9c96d541f96de8272ff4dba7b5
   Create Index: 18
   Modify Index: 39
   Policies:
      2f8f99c7-edd9-2f09-7e4b-a1f519eb4fc2 - crawler-kv
   Service Identities:
      crawler (Datacenters: all)
archiver:
   ID:           a365fdc9-ac71-e754-0645-7ab6bd747301
   Description:  archiver role
   Hash:         9af397ea92ee901366d6333c658195be16f4aee8aa64d2b529b921c879b70a58
   Create Index: 22
   Modify Index: 22
   Service Identities:
      archiver (Datacenters: dc2)
```

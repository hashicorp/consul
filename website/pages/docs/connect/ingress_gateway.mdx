---
layout: docs
page_title: Connect - Ingress Gateways
sidebar_title: Ingress Gateways
description: >-
  An ingress gateway enables ingress traffic from services outside the Consul
  service mesh to services inside the Consul service mesh. This section details
  how to use Envoy and describes how you can plug in a gateway of your choice.
---

# Ingress Gateways

-> **1.8.0+:**  This feature is available in Consul versions 1.8.0 and newer.

Ingress gateways enable ingress traffic from services outside the Consul
service mesh to services inside the Consul service mesh. They are
an entrypoint for outside traffic and allow you to define what services
should be exposed and on what port. You configure an ingress gateway by defining a set of
[listeners](/docs/agent/config-entries/ingress-gateway#listeners) that each map
to a set of backing
[services](/docs/agent/config-entries/ingress-gateway#services).

Depending on the
[protocol](/docs/agent/config-entries/ingress-gateway#protocol) defined for a
listener, multiple services can be specified for a single listener. In this
case, the ingress gateway relies on host/authority headers to decide the
service that should receive the traffic.

To enable easier service discovery, a new Consul [DNS
subdomain](/docs/agent/dns#ingress-service-lookups) is provided, on
`<service>.ingress.<domain>`.

## Prerequisites

Ingress gateways also require that your Consul datacenters are configured correctly:

- You'll need to use Consul version 1.8.0.
- Consul [Connect](/docs/agent/options#connect) must be enabled on the datacenter's Consul servers.
- [gRPC](/docs/agent/options#grpc_port) must be enabled on all client agents.

Currently, [Envoy](https://www.envoyproxy.io/) is the only proxy with ingress gateway capabilities in Consul.

## Running and Using an Ingress Gateway

You must complete the following steps to configure an ingress gateway to proxy traffic to services in the Consul service mesh:

1. Start an Envoy proxy using the [envoy subcommand](/docs/commands/connect/envoy), specifying the `ingress` gateway type:
    ```shell
    $ consul connect envoy -gateway=ingress -register \
      -address '{{ GetInterfaceIP "eth0" }}:8888'
    ```

2. Create and apply an `ingress-gateway` [configuration entry](/docs/agent/config-entries/ingress-gateway) that defines
a set of listeners that expose the desired backing services. The config entry can be applied via the
[CLI](/docs/commands/config/write) or [API](/api/config#apply-configuration).

3. Ensure that [Consul intentions](/docs/commands/intention) are setup between the ingress gateway and the backing services.

4. **Optionally** use the `<service>.ingress.<domain>` [DNS subdomain](/docs/agent/dns#ingress-service-lookups) to discover the ingress
gateways for a service.

## Ingress Gateway Configuration

Ingress gateways are defined similarly to other services registered with Consul, with two exceptions.
The first is that the [kind](/api/agent/service#kind) must be "ingress-gateway". Second,
the ingress gateway service definition may contain a `Proxy.Config` entry just like a
Connect proxy service, to define opaque configuration parameters useful for the actual proxy software.
For Envoy there are some supported [gateway options](/docs/connect/proxies/envoy#gateway-options) as well as
[escape-hatch overrides](/docs/connect/proxies/envoy#escape-hatch-overrides).

-> **Note:** If ACLs are enabled, a token granting `service:write` for the gateway's service name
and `service:read` for all services in the datacenter. These permissions authorize the token to route
communications for other Connect services.

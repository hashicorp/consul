---
layout: docs
page_title: Kubernetes Health Checks
sidebar_title: Health Checks
description: Configuring Kubernetes Health Checks
---

# Kubernetes Health Checks in Consul on Kubernetes

-> 0.25+ This feature is available in consul-helm versions 0.25 and higher

~> This topic requires familiarity with [Kubernetes Health Checks](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/).

This page describes how to enable Kubernetes Health checks to extend Consul for service mesh uses cases.

When deploying your helm chart you must provide helm with a custom yaml file that contains your environment configuration.
Enabling health checks is done via the stanza `healthChecks` under `connectInject`.

When `enabled: true` is set, a [TTL health check](https://www.consul.io/docs/discovery/checks) will be registered within
Consul for each Kubernetes pod that is connect-injected. The Consul health check's state will reflect the pod's readiness
status which is the combination of all probes registered with the pod. Kubernetes Readiness probes are the primary use
case as they can change state without restarting the containers in the pod.

When readiness probes are set for a pod, the status of the pod will be reflected within Consul, and will cause Consul to redirect service
mesh traffic from/to the pod based on the pod's health. If the pod were to have failing health checks, Consul will no longer use
the service instance associated with the pod for service mesh traffic. When the pod passes it's health checks, Consul will
then use the respective service instance for service mesh traffic.

In the case where no health checks are assigned to a pod, the default behaviour is the Consul health check will always
be marked `passing`.

The minimal configuration required to enable health check synchronization with Consul for service mesh traffic is:

```yaml
global:
  name: consul
connectInject:
  enabled: true
  healthChecks:
    enabled: true
```

If the configuration for `healthChecks` is set to `enabled: false` no health checks will be associated with Consul for
Kubernetes pods regardless of the state of the pod's health probes.

-> It is highly recommended to [enable TLS](/docs/k8s/tls-on-existing-cluster) for all configurations which use healthChecks to mitigate any
security concerns should the pod network ever be compromised.

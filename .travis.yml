language: go

go:
  # Please keep this in-sync with the go version we build against in
  # build-support/docker/Build-Go.dockerfile.
  - "1.11.4"

os:
  - linux
  - osx

branches:
  only:
    - master
    - f-envoy

matrix:
  include:
    - os: linux
      env: GOTEST_PKGS="./api"
    - os: linux
      env: GOTEST_PKGS="./agent"
    - os: linux
      env: GOTEST_PKGS="./agent/consul"
    - os: linux
      env: GOTEST_PKGS_EXCLUDE="./api|./agent|./agent/consul"

    - os: osx
      env: GOTEST_PKGS="./api"

script:
  - go run hack/main.go
  # - make test-ci

sudo: false

.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-CLOUDDNS" 7 "December 2019" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIclouddns\fP - enables serving zone data from GCP Cloud DNS.

.SH "DESCRIPTION"
.PP
The \fIclouddns\fP plugin is useful for serving zones from resource record
sets in GCP Cloud DNS. This plugin supports all Google Cloud DNS
records
\[la]https://cloud.google.com/dns/docs/overview#supported_dns_record_types\[ra]. This plugin can
be used when CoreDNS is deployed on GCP or elsewhere. Note that this plugin accesses the resource
records through the Google Cloud API. For records in a privately hosted zone, it is not necessary to
place CoreDNS and this plugin in the associated VPC network. In fact the private hosted zone could
be created without any associated VPC and this plugin could still access the resource records under
the hosted zone.

.SH "SYNTAX"
.PP
.RS

.nf
clouddns [ZONE:PROJECT\_ID:HOSTED\_ZONE\_NAME...] {
    credentials [FILENAME]
    fallthrough [ZONES...]
}

.fi
.RE

.IP \(bu 4
\fBZONE\fP the name of the domain to be accessed. When there are multiple zones with overlapping
domains (private vs. public hosted zone), CoreDNS does the lookup in the given order here.
Therefore, for a non-existing resource record, SOA response will be from the rightmost zone.
.IP \(bu 4
\fBPROJECT_ID\fP the project ID of the Google Cloud project.
.IP \(bu 4
\fBHOSTED\fIZONE\fPNAME\fP the name of the hosted zone that contains the resource record sets to be
accessed.
.IP \(bu 4
\fB\fCcredentials\fR is used for reading the credential file.
.IP \(bu 4
\fBFILENAME\fP GCP credentials file path (normally a .json file).
.IP \(bu 4
\fB\fCfallthrough\fR If zone matches and no record can be generated, pass request to the next plugin.
If \fB[ZONES...]\fP is omitted, then fallthrough happens for all zones for which the plugin is
authoritative. If specific zones are listed (for example \fB\fCin-addr.arpa\fR and \fB\fCip6.arpa\fR), then
only queries for those zones will be subject to fallthrough.
.IP \(bu 4
\fBZONES\fP zones it should be authoritative for. If empty, the zones from the configuration block


.SH "EXAMPLES"
.PP
Enable clouddns with implicit GCP credentials and resolve CNAMEs via 10.0.0.1:

.PP
.RS

.nf
example.org {
    clouddns example.org.:gcp\-example\-project:example\-zone
    forward . 10.0.0.1
}

.fi
.RE

.PP
Enable clouddns with fallthrough:

.PP
.RS

.nf
example.org {
    clouddns example.org.:gcp\-example\-project:example\-zone example.com.:gcp\-example\-project:example\-zone\-2 {
        fallthrough example.gov.
    }
}

.fi
.RE

.PP
Enable clouddns with multiple hosted zones with the same domain:

.PP
.RS

.nf
\&. {
    clouddns example.org.:gcp\-example\-project:example\-zone example.com.:gcp\-example\-project:other\-example\-zone
}

.fi
.RE


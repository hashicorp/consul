.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-ERRATIC" 7 "October 2019" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIerratic\fP - a plugin useful for testing client behavior.

.SH "DESCRIPTION"
.PP
\fIerratic\fP returns a static response to all queries, but the responses can be delayed,
dropped or truncated. The \fIerratic\fP plugin will respond to every A or AAAA query. For
any other type it will return a SERVFAIL response (except AXFR). The reply for A will return
192.0.2.53 (RFC 5737
\[la]https://tools.ietf.org/html/rfc5737\[ra]), for AAAA it returns 2001:DB8::53 (RFC
3849
\[la]https://tools.ietf.org/html/rfc3849\[ra]). For an AXFR request it will respond with a small
zone transfer.

.SH "SYNTAX"
.PP
.RS

.nf
erratic {
    drop [AMOUNT]
    truncate [AMOUNT]
    delay [AMOUNT [DURATION]]
}

.fi
.RE

.IP \(bu 4
\fB\fCdrop\fR: drop 1 per \fBAMOUNT\fP of queries, the default is 2.
.IP \(bu 4
\fB\fCtruncate\fR: truncate 1 per \fBAMOUNT\fP of queries, the default is 2.
.IP \(bu 4
\fB\fCdelay\fR: delay 1 per \fBAMOUNT\fP of queries for \fBDURATION\fP, the default for \fBAMOUNT\fP is 2 and
the default for \fBDURATION\fP is 100ms.


.PP
In case of a zone transfer and truncate the final SOA record \fIisn't\fP added to the response.

.SH "READY"
.PP
This plugin reports readiness to the ready plugin.

.SH "EXAMPLES"
.PP
.RS

.nf
example.org {
    erratic {
        drop 3
    }
}

.fi
.RE

.PP
Or even shorter if the defaults suit you. Note this only drops queries, it does not delay them.

.PP
.RS

.nf
example.org {
    erratic
}

.fi
.RE

.PP
Delay 1 in 3 queries for 50ms

.PP
.RS

.nf
example.org {
    erratic {
        delay 3 50ms
    }
}

.fi
.RE

.PP
Delay 1 in 3 and truncate 1 in 5.

.PP
.RS

.nf
example.org {
    erratic {
        delay 3 5ms
        truncate 5
    }
}

.fi
.RE

.PP
Drop every second query.

.PP
.RS

.nf
example.org {
    erratic {
        drop 2
        truncate 2
    }
}

.fi
.RE

.SH "ALSO SEE"
.PP
RFC 3849
\[la]https://tools.ietf.org/html/rfc3849\[ra] and RFC 5737
\[la]https://tools.ietf.org/html/rfc5737\[ra].

